name: 'Deploy Container'
description: 'Deploy to AWS ECS'
inputs:
  awsRole:
    description: 'AWS IAM role'
    required: true
  awsRegion:
    description: 'AWS region'
    required: true
runs:
  using: 'composite'
  steps:
      - name: Checkout this repo
        uses: actions/checkout@v3
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v2
        with:
          awsRole: ${{ inputs.awsRole }}
          awsRegion: ${{ inputs.awsRegion }}
          role-session-name: "GitHubActions-Deploy-DynamoDbStack"
      - name: Deploy App cdk stack
        shell: bash
        run: |
          npm install -g aws-cdk
          make deployBackend
